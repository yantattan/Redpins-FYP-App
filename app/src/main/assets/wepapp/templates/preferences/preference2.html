{% extends "base.html" %}
{% block title %}Choose your activitiy 2{% endblock %}

{% block content %}
{% from "includes/_formHelper.html" import render_field %}
<div class="main-div" id="preferences">
    <form method="post">
        <div class="preference">
            <h1>Getting You<br>Started</h1>
            <p>Pick at least <b>3</b> activities which suits you best!</p>

            <div class="activities">
                <ul id="select-list">
                <li>Foodie</li>
                <li>Animals</li>
                <li>Photography</li>
                <li>Museums</li>
                <li>Hiking</li>
                <li>Sports</li>
                <li>Cafes</li>
                <li>Heritage Sites</li>
                <li>Thrifting</li>
                <li>Concerts</li>
                <li>Island Hopping</li>
                <li>Bars & Clubs</li>
                <li>Music</li>
                </ul>
            </div>
        </div>
        
        <input id="next-btn" type="submit" value="Complete" class="next" disabled>

        <div id="checkboxes-div" style="display: none;">
            <br>
            <input type="checkbox" value="Foodie" id="pref1" name="preferences[]">
            <label for="pref1">Foodie</label>
    
            <br>
                <input type="checkbox" value="Animals" id="pref2" name="preferences[]">
                <label for="pref2">Animals</label>
        
            <br>
                <input type="checkbox" value="Photography" id="pref3" name="preferences[]">
                <label for="pref3">Photography</label>
        
            <br>
                <input type="checkbox" value="Museums" id="pref4" name="preferences[]">
                <label for="pref4">Museums</label>
        
            <br>
                <input type="checkbox" value="Hiking" id="pref5" name="preferences[]">
                <label for="pref5">Hiking</label>
        
            <br>
        
                <input type="checkbox" value="Sports" id="pref6" name="preferences[]">
                <label for="pref6">Sports</label>
        
            <br>
        
                <input type="checkbox" value="Cafes" id="pref7" name="preferences[]">
                <label for="pref7">Cafes</label>
        
            <br>
        
                <input type="checkbox" value="Heritage Sites" id="pref8" name="preferences[]">
                <label for="pref8">Heritage Sites</label>
        
            <br>
                <input type="checkbox" value="Thrifting" id="pref9" name="preferences[]">
                <label for="pref9">Thrifting</label>
        
            <br>
        
                <input type="checkbox" value="Concerts" id="pref10" name="preferences[]">
                <label for="pref10">Concerts</label>
        
            <br>
                <input type="checkbox" value="Island Hopping" id="pref11" name="preferences[]">
                <label for="pref11">Island Hopping</label>
        
            <br>
                <input type="checkbox" value="Bars & Clubs" id="pref12" name="preferences[]">
                <label for="pref12">Bars & Clubs</label>
        
            <br>
                <input type="checkbox" value="Music" id="pref13" name="preferences[]">
                <label for="pref13">Music</label>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
{{super()}}
<script>
    var buttons = [].slice.call(document.getElementById("select-list").children);
    var checkboxes = document.getElementById("checkboxes-div").getElementsByTagName("input");
    var checkedCount = 0;

    for (var i=0; i<buttons.length; i++) {
        buttons[i].addEventListener("click", function(e) {
            var index = buttons.indexOf(e.target);
            console.log(index)
            if (checkboxes[index].checked) {
                checkboxes[index].checked = false;
                buttons[index].style.background = null;
                buttons[index].style.color = null;
                checkedCount--;
            }
            else {
                checkboxes[index].checked = true;
                console.log(index)
                buttons[index].style.background = "linear-gradient(193.74deg, #E4002B 3.02%, #E82038 31.9%, #F8A36F 95.45%)";
                buttons[index].style.color = "white";
                checkedCount++;
            }

            if (checkedCount >= 3) {
                document.getElementById("next-btn").style.background = "linear-gradient(193.74deg, #E4002B 3.02%, #E82038 31.9%, #F8A36F 95.45%)";
                document.getElementById("next-btn").style.color = "white";
                document.getElementById("next-btn").disabled = false;
            }
            else {
                document.getElementById("next-btn").style.background = "#EEEEEE";
                document.getElementById("next-btn").style.color = "#BBBBBB";
                document.getElementById("next-btn").disabled = true;
            }
        })
    }
</script>
{% endblock %}